[
  {
    "objectID": "web/limits.html",
    "href": "web/limits.html",
    "title": "Municipis, comarques i territoris",
    "section": "",
    "text": "Ãšltima actualitzaciÃ³: Tue 15 Aug 2023 - 22:54:31"
  },
  {
    "objectID": "web/limits.html#paÃ¯sos-catalans",
    "href": "web/limits.html#paÃ¯sos-catalans",
    "title": "Municipis, comarques i territoris",
    "section": "PaÃ¯sos Catalans",
    "text": "PaÃ¯sos Catalans\nBD de referÃ¨ncia\n\n\nðŸŽ‰ Tot en ordre ðŸŽ‰"
  },
  {
    "objectID": "web/limits.html#territoris",
    "href": "web/limits.html#territoris",
    "title": "Municipis, comarques i territoris",
    "section": "Territoris",
    "text": "Territoris\nBD de referÃ¨ncia\n\n\nðŸŽ‰ Tot en ordre ðŸŽ‰"
  },
  {
    "objectID": "web/limits.html#comarques",
    "href": "web/limits.html#comarques",
    "title": "Municipis, comarques i territoris",
    "section": "Comarques",
    "text": "Comarques\nBD de referÃ¨ncia\n\n\nðŸŽ‰ Tot en ordre ðŸŽ‰"
  },
  {
    "objectID": "web/limits.html#municipis",
    "href": "web/limits.html#municipis",
    "title": "Municipis, comarques i territoris",
    "section": "Municipis",
    "text": "Municipis\nBD de referÃ¨ncia\n\n\nðŸŽ‰ Tot en ordre ðŸŽ‰"
  },
  {
    "objectID": "README.html#afegir-nous-objectes-a-les-bases-de-dades",
    "href": "README.html#afegir-nous-objectes-a-les-bases-de-dades",
    "title": "",
    "section": "Afegir nous objectes a les bases de dades",
    "text": "Afegir nous objectes a les bases de dades\nSi voleu afegir objectes amb les seves etiquetes a les bases de dades, podeu obrir un tiquet o podeu provar de fer un PR amb les instruccions que trobareu a aquÃ­. Fora bo que els estats de referÃ¨ncia dels objectes siguin consensuats amb la Comunitat dâ€™OpenStreetmap en catalÃ ."
  },
  {
    "objectID": "README.html#paquet-dr",
    "href": "README.html#paquet-dr",
    "title": "",
    "section": "Paquet dâ€™R",
    "text": "Paquet dâ€™R\nLa consulta, comparaciÃ³ amb bases de dades de referÃ¨ncia i renderitzaciÃ³ de la web es fan amb un paquet dâ€™R i accions de github. El paquet tambÃ© inclou funcions per restaurar els objectes de manera rÃ pida, perÃ² com a projecte comunitari, Ã©s important intentar parlar amb els usuaris que discrepen de les bases de dades de referÃ¨ncia. Vegeu la documentaciÃ³ del paquet dâ€™R per mÃ©s detalls.\n\nExemple de restauraciÃ³\nInstalÂ·leu el paquet dâ€™R:\n# install.packages(\"devtools\")\ndevtools::install_github(\"OSM-Catalan/monitorOSM\")\nRestauraciÃ³ de les etiquetes name i wikipedia de les comarques del PaÃ­s ValenciÃ :\nlibrary(monitorOSM)\n\nid &lt;- modifica_etiquetes_osm(\n  comarques[comarques$regio == \"PV\", ],\n  claus = c(\"name\", \"wikipedia\"),\n  comentari = \"Restaura els noms de les comarques dels PaÃ­s ValenciÃ \", hashtags = \"monitorOSM\"\n)\nRetorna lâ€™identificador del conjunt de canvis."
  },
  {
    "objectID": "data-raw/README.html",
    "href": "data-raw/README.html",
    "title": "Bases de dades de referÃ¨ncia",
    "section": "",
    "text": "bd\nn_obj\nn_cols\ncolumnes\n\n\n\n\ncomarques\n95\n9\nname:ca , regio , osm_id , osm_type , name , wikipedia , wikidata , admin_level , historic:admin_level\n\n\nmunicipis\n3344\n9\nname:ca , regio , comarca , osm_id , osm_type , name , wikipedia , wikidata , admin_level\n\n\nterritoris\n10\n7\nname:ca , regio , osm_id , osm_type , name , wikipedia, wikidata\n\n\nPPCC\n1\n6\nname:ca , osm_id , osm_type , name , wikipedia, wikidata\n\n\n\nEn total es monitoritzen 3450 objectes dâ€™OpenStreetMap.\nAbans de revertir canvis a OSM o comentar conjunts de canvis, comproveu les dades i, si cal, corregiu les bases de dades de referÃ¨ncia.\n\n\nCreeu una taula amb els estats de referÃ¨ncia. Cal que cada fila contingui les etiquetes que vulgueu monitorejar i els identificadors Ãºnics dâ€™OpenStreetMap (osm_type i osm_id). Podeu generar les taules amb el paquet dâ€™R osmdata.\nExemple per generar una taula les etiquetes name:ca, name, wikipedia i wikidata de tots els cims dels PaÃ¯sos Catalans (relation(id:11747082)):\nlibrary(osmdata)\n#&gt; Data (c) OpenStreetMap contributors, ODbL 1.0. https://www.openstreetmap.org/copyright\n\ncims &lt;- opq(bbox = \"relation(id:11747082)\", out = \"tags\", timeout = \"100\") |&gt;\n  add_osm_feature(key = \"natural\", value = \"peak\") |&gt;\n  opq_csv(fields = c(\"name:ca\", \"::id\", \"::type\", \"name\", \"wikipedia\", \"wikidata\")) |&gt;\n  osmdata_data_frame()\n\nnames(cims) &lt;- gsub(\"^@\", \"osm_\", names(cims))\nhead(cims)\n#&gt;                    name:ca   osm_id osm_type                     name\n#&gt; 1           Puig de l'Ofre 26783257     node           Puig de l'Ofre\n#&gt; 2        Puig de Bassegoda 26862531     node        Puig de Bassegoda\n#&gt; 3           Cap de Boumort 26862611     node           Cap de Boumort\n#&gt; 4             Cap del Verd 26862659     node             Cap del Verd\n#&gt; 5       Pic de Comaloforno 26862732     node       Pic de Comaloforno\n#&gt; 6 Cap de la Gallina Pelada 26862904     node Cap de la Gallina Pelada\n#&gt;                     wikipedia  wikidata\n#&gt; 1           ca:Puig de l'Ofre  Q1652824\n#&gt; 2        ca:Puig de Bassegoda  Q4894784\n#&gt; 3           ca:Cap de Boumort  Q5034453\n#&gt; 4             ca:Cap del Verd  Q5034455\n#&gt; 5       ca:Pic de Comaloforno  Q2984642\n#&gt; 6 ca:Cap de la Gallina Pelada Q17482071\nÃ‰s prÃ ctic afegir la comarca i territori de cada objecte per poder fer les reversions amb conjunts de canvis mÃ©s petits:\nlibrary(osmdata)\nlibrary(monitorOSM) # comarques\n#&gt; Dades sota llicÃ¨ncia ODbL 1.0. (c) ColÂ·laboradors d'OpenStreetMap https://www.openstreetmap.org/copyright\n\ncims_comarca &lt;- mapply(function(id, nom, territori) {\n  out &lt;- opq(bbox = paste0(\"relation(id:\", id, \")\"), out = \"tags\", timeout = \"100\") |&gt;\n    add_osm_feature(key = \"natural\", value = \"peak\") |&gt;\n    opq_csv(fields = c(\"name:ca\", \"::id\", \"::type\", \"name\", \"wikipedia\", \"wikidata\")) |&gt;\n    osmdata_data_frame()\n\n  if (nrow(out) &gt; 0) {\n    out$regio &lt;- territori\n    out$comarca &lt;- nom\n  }\n\n  return(out)\n}, id = comarques$osm_id, nom = comarques$`name:ca`, territori = comarques$regio, SIMPLIFY = FALSE)\n\ncims_comarques &lt;- do.call(rbind, cims_comarca)\nnames(cims_comarques) &lt;- gsub(\"^@\", \"osm_\", names(cims_comarques))\n\ncims_comarques &lt;- cims_comarques[!duplicated(cims_comarques[, c(\"osm_type\", \"osm_id\")]), ] # elimina objectes duplicats\nordre &lt;- order(cims_comarques$regio, cims_comarques$comarca, cims_comarques$`name:ca`)\nordre_columnes &lt;- c(\"name:ca\", \"regio\", \"comarca\", \"osm_id\", \"osm_type\", \"name\", \"wikipedia\", \"wikidata\")\ncims_comarques &lt;- unique(cims_comarques[ordre, ordre_columnes])\nrownames(cims_comarques) &lt;- NULL\n\nhead(cims_comarques)\n#&gt;   name:ca   regio          comarca     osm_id osm_type              name\n#&gt; 1    &lt;NA&gt; Andorra Andorra la Vella 1473165520     node        Pic Carroi\n#&gt; 2    &lt;NA&gt; Andorra Andorra la Vella 2188366026     node    Pic de Coll Pa\n#&gt; 3    &lt;NA&gt; Andorra Andorra la Vella 3956298776     node              &lt;NA&gt;\n#&gt; 4    &lt;NA&gt; Andorra Andorra la Vella 9127648546     node Pic de la Peguera\n#&gt; 5    &lt;NA&gt; Andorra Andorra la Vella 9706258659     node    Roc dels Corbs\n#&gt; 6    &lt;NA&gt; Andorra Andorra la Vella 9706258725     node    Roc de Patapou\n#&gt;   wikipedia  wikidata\n#&gt; 1      &lt;NA&gt; Q21329274\n#&gt; 2      &lt;NA&gt; Q21329357\n#&gt; 3      &lt;NA&gt;      &lt;NA&gt;\n#&gt; 4      &lt;NA&gt;      &lt;NA&gt;\n#&gt; 5      &lt;NA&gt; Q21329430\n#&gt; 6      &lt;NA&gt;      &lt;NA&gt;\nUn cop tingueu la base de dades a punt, es pot afegir al paquet de manera que estigui disponible quan el carreguem:\nusethis::use_data(cims_comarques, overwrite = TRUE, compress = \"xz\")\nÃ‰s recomanable preparar un fitxer per gestionar la nova base de dades i desar-la com a taula (exemple). TambÃ© cal documentar la nova taula (exemple).\nPer comenÃ§ar a monitoritzar la nova base de dades cal crear o afegir-la a un fitxer com limits.qmd."
  },
  {
    "objectID": "data-raw/README.html#com-afegir-noves-bases-de-dades",
    "href": "data-raw/README.html#com-afegir-noves-bases-de-dades",
    "title": "Bases de dades de referÃ¨ncia",
    "section": "",
    "text": "Creeu una taula amb els estats de referÃ¨ncia. Cal que cada fila contingui les etiquetes que vulgueu monitorejar i els identificadors Ãºnics dâ€™OpenStreetMap (osm_type i osm_id). Podeu generar les taules amb el paquet dâ€™R osmdata.\nExemple per generar una taula les etiquetes name:ca, name, wikipedia i wikidata de tots els cims dels PaÃ¯sos Catalans (relation(id:11747082)):\nlibrary(osmdata)\n#&gt; Data (c) OpenStreetMap contributors, ODbL 1.0. https://www.openstreetmap.org/copyright\n\ncims &lt;- opq(bbox = \"relation(id:11747082)\", out = \"tags\", timeout = \"100\") |&gt;\n  add_osm_feature(key = \"natural\", value = \"peak\") |&gt;\n  opq_csv(fields = c(\"name:ca\", \"::id\", \"::type\", \"name\", \"wikipedia\", \"wikidata\")) |&gt;\n  osmdata_data_frame()\n\nnames(cims) &lt;- gsub(\"^@\", \"osm_\", names(cims))\nhead(cims)\n#&gt;                    name:ca   osm_id osm_type                     name\n#&gt; 1           Puig de l'Ofre 26783257     node           Puig de l'Ofre\n#&gt; 2        Puig de Bassegoda 26862531     node        Puig de Bassegoda\n#&gt; 3           Cap de Boumort 26862611     node           Cap de Boumort\n#&gt; 4             Cap del Verd 26862659     node             Cap del Verd\n#&gt; 5       Pic de Comaloforno 26862732     node       Pic de Comaloforno\n#&gt; 6 Cap de la Gallina Pelada 26862904     node Cap de la Gallina Pelada\n#&gt;                     wikipedia  wikidata\n#&gt; 1           ca:Puig de l'Ofre  Q1652824\n#&gt; 2        ca:Puig de Bassegoda  Q4894784\n#&gt; 3           ca:Cap de Boumort  Q5034453\n#&gt; 4             ca:Cap del Verd  Q5034455\n#&gt; 5       ca:Pic de Comaloforno  Q2984642\n#&gt; 6 ca:Cap de la Gallina Pelada Q17482071\nÃ‰s prÃ ctic afegir la comarca i territori de cada objecte per poder fer les reversions amb conjunts de canvis mÃ©s petits:\nlibrary(osmdata)\nlibrary(monitorOSM) # comarques\n#&gt; Dades sota llicÃ¨ncia ODbL 1.0. (c) ColÂ·laboradors d'OpenStreetMap https://www.openstreetmap.org/copyright\n\ncims_comarca &lt;- mapply(function(id, nom, territori) {\n  out &lt;- opq(bbox = paste0(\"relation(id:\", id, \")\"), out = \"tags\", timeout = \"100\") |&gt;\n    add_osm_feature(key = \"natural\", value = \"peak\") |&gt;\n    opq_csv(fields = c(\"name:ca\", \"::id\", \"::type\", \"name\", \"wikipedia\", \"wikidata\")) |&gt;\n    osmdata_data_frame()\n\n  if (nrow(out) &gt; 0) {\n    out$regio &lt;- territori\n    out$comarca &lt;- nom\n  }\n\n  return(out)\n}, id = comarques$osm_id, nom = comarques$`name:ca`, territori = comarques$regio, SIMPLIFY = FALSE)\n\ncims_comarques &lt;- do.call(rbind, cims_comarca)\nnames(cims_comarques) &lt;- gsub(\"^@\", \"osm_\", names(cims_comarques))\n\ncims_comarques &lt;- cims_comarques[!duplicated(cims_comarques[, c(\"osm_type\", \"osm_id\")]), ] # elimina objectes duplicats\nordre &lt;- order(cims_comarques$regio, cims_comarques$comarca, cims_comarques$`name:ca`)\nordre_columnes &lt;- c(\"name:ca\", \"regio\", \"comarca\", \"osm_id\", \"osm_type\", \"name\", \"wikipedia\", \"wikidata\")\ncims_comarques &lt;- unique(cims_comarques[ordre, ordre_columnes])\nrownames(cims_comarques) &lt;- NULL\n\nhead(cims_comarques)\n#&gt;   name:ca   regio          comarca     osm_id osm_type              name\n#&gt; 1    &lt;NA&gt; Andorra Andorra la Vella 1473165520     node        Pic Carroi\n#&gt; 2    &lt;NA&gt; Andorra Andorra la Vella 2188366026     node    Pic de Coll Pa\n#&gt; 3    &lt;NA&gt; Andorra Andorra la Vella 3956298776     node              &lt;NA&gt;\n#&gt; 4    &lt;NA&gt; Andorra Andorra la Vella 9127648546     node Pic de la Peguera\n#&gt; 5    &lt;NA&gt; Andorra Andorra la Vella 9706258659     node    Roc dels Corbs\n#&gt; 6    &lt;NA&gt; Andorra Andorra la Vella 9706258725     node    Roc de Patapou\n#&gt;   wikipedia  wikidata\n#&gt; 1      &lt;NA&gt; Q21329274\n#&gt; 2      &lt;NA&gt; Q21329357\n#&gt; 3      &lt;NA&gt;      &lt;NA&gt;\n#&gt; 4      &lt;NA&gt;      &lt;NA&gt;\n#&gt; 5      &lt;NA&gt; Q21329430\n#&gt; 6      &lt;NA&gt;      &lt;NA&gt;\nUn cop tingueu la base de dades a punt, es pot afegir al paquet de manera que estigui disponible quan el carreguem:\nusethis::use_data(cims_comarques, overwrite = TRUE, compress = \"xz\")\nÃ‰s recomanable preparar un fitxer per gestionar la nova base de dades i desar-la com a taula (exemple). TambÃ© cal documentar la nova taula (exemple).\nPer comenÃ§ar a monitoritzar la nova base de dades cal crear o afegir-la a un fitxer com limits.qmd."
  }
]