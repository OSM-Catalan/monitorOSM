[
  {
    "objectID": "web/localitats.html",
    "href": "web/localitats.html",
    "title": "Localitats",
    "section": "",
    "text": "Última actualització: Thu 18 Apr 2024 - 02:04:12",
    "crumbs": [
      "Bases de dades de referència",
      "Control de canvis",
      "Localitats"
    ]
  },
  {
    "objectID": "web/localitats.html#localitats-que-fan-dadmin_centre-de-relacions-de-municipis",
    "href": "web/localitats.html#localitats-que-fan-dadmin_centre-de-relacions-de-municipis",
    "title": "Localitats",
    "section": "Localitats que fan d’admin_centre de relacions de municipis",
    "text": "Localitats que fan d’admin_centre de relacions de municipis\nBD de referència\n\n\n\n\n\n\nosm_url\ncanvi\nname:ca\nname\nwikidata\nwikipedia\nplace\ncapital\nadmin_level\n\n\n\n\nhttps://osm.org/node/1347315997\n+\nQueixigar\nCajigar / Queixigar\nQ13048573\nca:Queixigar\nvillage\n8\n\n\n\nhttps://osm.org/node/1347315997\n-\nQueixigar\nCajigar / Queixigar\nQ984593\nca:Monesma i Queixigar\nvillage\n8\n\n\n\nhttps://osm.org/node/1446993889\n+\nAreny de Noguera\nArén / Areny de Noguera\nQ719174\nes:Arén\nvillage\n8\n\n\n\nhttps://osm.org/node/1446993889\n-\nAreny de Noguera\nArén / Areny de Noguera\nQ719174\nca:Areny de Noguera\nvillage\n8\n\n\n\nhttps://osm.org/node/1446993893\n+\nSanui\nAzanuy\nQ29816674\nes:Azanuy\nvillage\n8\n\n\n\nhttps://osm.org/node/1446993893\n-\nSanui\nAzanuy\nQ793581\nca:Sanui i Alins\nvillage\n8\n\n\n\nhttps://osm.org/node/1446993988\n+\nla Sorollera\nLa Cerollera\nQ1651537\nes:La Cerollera\nvillage\n8\n\n\n\nhttps://osm.org/node/1446993988\n-\nla Sorollera\nLa Cerollera\nQ1651537\nca:La Sorollera\nvillage\n8\n\n\n\nhttps://osm.org/node/1446993991\n+\nla Freixneda\nLa Fresneda / la Freixneda\nQ1651574\nca:La Freixneda\nvillage\n8\n\n\n\nhttps://osm.org/node/1446993991\n-\nla Freixneda\nLa Fresneda / la Freixneda\nQ24015119\nca:La Freixneda\nvillage\n8\n\n\n\nhttps://osm.org/node/1446994144\n+\nTorredarques\nTorre de Arcas / Torredarques\nQ1650917\nca:Torredarques\nvillage\n8\n\n\n\nhttps://osm.org/node/1446994144\n-\nTorredarques\nTorre de Arcas / Torredarques\nQ1650917\nes:Torre de Arcas\nvillage\n8\n\n\n\nhttps://osm.org/node/1446994146\n+\nLa Torre del Comte\nTorre del Compte / la Torre del Comte\nQ1641245\nca:La Torre del Comte\nvillage\n8\n\n\n\nhttps://osm.org/node/1446994146\n-\nla Torre del Comte\nTorre del Compte / la Torre del Comte\nQ1641245\nca:La Torre del Comte\nvillage\n8\n\n\n\nhttps://osm.org/node/1446994154\n+\nTorrent de Cinca\nTorrente de Cinca / Torrent de Cinca\nQ983642\nca:Torrent de Cinca\nvillage\n8\n\n\n\nhttps://osm.org/node/1446994154\n-\nTorrent de Cinca\nTorrente de Cinca\nQ983642\nca:Torrent de Cinca\nvillage\n8\n\n\n\nhttps://osm.org/node/304858528\n+\nla Pobla de Roda\nLa Puebla de Roda\nQ3572864\nes:La Puebla de Roda\nvillage\n8\n\n\n\nhttps://osm.org/node/304858528\n-\nla Pobla de Roda\nLa Puebla de Roda\nQ3572864\nca:La Pobla de Roda\nvillage\n8\n\n\n\nhttps://osm.org/node/308302337\n+\nPena-roja de Tastavins\nPeñarroya de Tastavins\nQ539588\nes:Peñarroya de Tastavins\nvillage\n8\n\n\n\nhttps://osm.org/node/308302337\n-\nPena-roja de Tastavins\nPeñarroya de Tastavins / Pena-roja de Tastavins\nQ539588\nca:Pena-roja\nvillage\n8\n\n\n\nhttps://osm.org/node/308302749\n+\nRàfels\nRáfales / Ràfels\nQ1651261\nca:Ràfels\nvillage\n8\n\n\n\nhttps://osm.org/node/308302749\n-\nRàfels\nRàfels / Ráfales\nQ1651261\nca:Ràfels\nvillage\n8\n\n\n\nhttps://osm.org/node/356481105\n+\nel Campell\nAlcampell / el Campell\nQ22828248\nes:Alcampell\nvillage\n8\n\n\n\nhttps://osm.org/node/356481105\n-\nel Campell\nAlcampell / el Campell\nQ22828248\n\nvillage\n8\n\n\n\nhttps://osm.org/node/359918992\n+\nSaidí\nZaidín / Saidí\nQ144331\nca:Saidí\nvillage\n8\n\n\n\nhttps://osm.org/node/359918992\n-\nSaidí\nZaidín\nQ144331\nca:Saidí\nvillage\n8\n\n\n\nhttps://osm.org/node/364850314\n+\nCamporrells\nCamporrells\nQ985141\nes:Camporrélls\nvillage\n8\n\n\n\nhttps://osm.org/node/364850314\n-\nCamporrells\nCamporrells\nQ985141\nca:Camporrells\nvillage\n8\n\n\n\nhttps://osm.org/node/364850322\n+\nValldellou\nBaldellou\nQ804776\nes:Baldellou\nvillage\n8\n\n\n\nhttps://osm.org/node/364850322\n-\nValldellou\nBaldellou\nQ804776\nca:Valldellou\nvillage\n8\n\n\n\nhttps://osm.org/node/3717853177\n+\nla Ginebrosa\nLa Ginebrosa / la Ginebrosa\nQ24015109\n\nvillage\n8\n\n\n\nhttps://osm.org/node/3717853177\n-\nla Ginebrosa\nLa Ginebrosa\nQ24015109\n\nvillage\n8\n\n\n\nhttps://osm.org/node/489366273\n+\nPeralta de la Sal\nPeralta de la Sal\nQ2366431\nes:Peralta de la Sal\nvillage\n8\n\n\n\nhttps://osm.org/node/489366273\n-\nPeralta de la Sal\nPeralta de la Sal\nQ2366431\nca:Peralta de la Sal\nvillage\n8\n\n\n\nhttps://osm.org/node/582582935\n+\nGimenells\nGimenells\nQ107370350\nca:Poble de Gimenells\nvillage\n8\n\n\n\nhttps://osm.org/node/582582935\n-\nGimenells\nGimenells\nQ522934\nca:Gimenells i el Pla de la Font\nvillage\n8\n\n\n\nhttps://osm.org/node/739073791\n+\nFaió\nFayón / Faió\nQ1639270\nca:Faió\nvillage\n8\n\n\n\nhttps://osm.org/node/739073791\n-\nFaió\nFayón / Faió\nQ1639270\nes:Fayón\nvillage\n8\n\n\n\nhttps://osm.org/node/793210842\n+\nBellmunt de Mesquí\nBelmonte de San José\nQ1652468\nca:Bellmunt de Mesquí\nvillage\n8\n\n\n\nhttps://osm.org/node/793210842\n-\nBellmunt de Mesquí\nBelmonte de San José / Bellmunt de Mesquí\nQ1652468\nca:Bellmunt de Mesquí\nvillage\n8\n\n\n\n\n\n\n\n\nConjunts de canvis\n\n\nhttps://osm.org/node/1347315997\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n20\n149624120\n2024-04-05 16:38:27\nDavileci\n8123953\nwikidata\nQ13048573\nQ984593\n\n\n20\n149624120\n2024-04-05 16:38:27\nDavileci\n8123953\nwikipedia\nca:Queixigar\nca:Monesma i Queixigar\n\n\n\n\nhttps://osm.org/node/1446993889\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n19\n149995738\n2024-04-14 14:37:01\nAquaevitae\n21300969\nwikipedia\nes:Arén\nca:Areny de Noguera\n\n\n\n\nhttps://osm.org/node/1446993893\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n17\n150025897\n2024-04-15 09:01:37\nAquaevitae\n21300969\nwikidata\nQ29816674\nQ793581\n\n\n17\n150025897\n2024-04-15 09:01:37\nAquaevitae\n21300969\nwikipedia\nes:Azanuy\nca:Sanui i Alins\n\n\n\n\nhttps://osm.org/node/1446993988\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n20\n150025531\n2024-04-15 08:52:48\nAquaevitae\n21300969\nwikipedia\nes:La Cerollera\nca:La Sorollera\n\n\n\n\nhttps://osm.org/node/1446993991\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n79\n149960931\n2024-04-13 16:59:01\nAquaevitae\n21300969\nwikidata\nQ11116589\nQ24015119\n\n\n\n\nhttps://osm.org/node/1446994144\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n64\n150146208\n2024-04-17 19:43:38\nmatarranyacorrector\n20861933\nwikipedia\nca:Torredarques\nes:Torre de Arcas\n\n\n\n\nhttps://osm.org/node/1446994146\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n80\n149931910\n2024-04-12 23:25:31\nmatarranyacorrector\n20861933\nname:ca\nLa Torre del Comte\nla Torre del Comte\n\n\n\n\nhttps://osm.org/node/1446994154\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n22\n150146208\n2024-04-17 19:43:38\nmatarranyacorrector\n20861933\nname\nTorrente de Cinca / Torrent de Cinca\nTorrente de Cinca\n\n\n\n\nhttps://osm.org/node/304858528\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n19\n149991521\n2024-04-14 12:46:20\nAquaevitae\n21300969\nwikipedia\nes:La Puebla de Roda\nca:La Pobla de Roda\n\n\n\n\nhttps://osm.org/node/308302337\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n49\n149920657\n2024-04-12 17:04:44\nAquaevitae\n21300969\nname\nPeñarroya de Tastavins\nPeñarroya de Tastavins / Pena-roja de Tastavins\n\n\n49\n149920657\n2024-04-12 17:04:44\nAquaevitae\n21300969\nwikipedia\nes:Peñarroya de Tastavins\nca:Pena-roja\n\n\n\n\nhttps://osm.org/node/308302749\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n98\n149917550\n2024-04-12 15:49:51\nAquaevitae\n21300969\nname\nRáfales\nRàfels / Ráfales\n\n\n\n\nNo s’ha trobat cap versió en l’estat de referència per https://osm.org/node/356481105.\n\n\n\nhttps://osm.org/node/359918992\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n21\n150146208\n2024-04-17 19:43:38\nmatarranyacorrector\n20861933\nname\nZaidín / Saidí\nZaidín\n\n\n\n\nhttps://osm.org/node/364850314\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n14\n150026382\n2024-04-15 09:12:40\nAquaevitae\n21300969\nwikipedia\nes:Camporrélls\nca:Camporrells\n\n\n\n\nhttps://osm.org/node/364850322\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n17\n150026382\n2024-04-15 09:12:40\nAquaevitae\n21300969\nwikipedia\nes:Baldellou\nca:Valldellou\n\n\n\n\nhttps://osm.org/node/3717853177\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n33\n150146208\n2024-04-17 19:43:38\nmatarranyacorrector\n20861933\nname\nLa Ginebrosa / la Ginebrosa\nLa Ginebrosa\n\n\n\n\nhttps://osm.org/node/489366273\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n17\n150025897\n2024-04-15 09:01:37\nAquaevitae\n21300969\nwikipedia\nes:Peralta de la Sal\nca:Peralta de la Sal\n\n\n\n\nhttps://osm.org/node/582582935\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n19\n150053250\n2024-04-15 18:29:26\nDavileci\n8123953\nwikidata\nQ107370350\nQ522934\n\n\n19\n150053250\n2024-04-15 18:29:26\nDavileci\n8123953\nwikipedia\nca:Poble de Gimenells\nca:Gimenells i el Pla de la Font\n\n\n\n\nhttps://osm.org/node/739073791\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n20\n150054362\n2024-04-15 18:59:51\nmatarranyacorrector\n20861933\nwikipedia\nca:Faió\nes:Fayón\n\n\n\n\nhttps://osm.org/node/793210842\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n143\n149992981\n2024-04-14 13:27:14\nAquaevitae\n21300969\nname\nBelmonte de San José\nBelmonte de San José / Bellmunt de Mesquí",
    "crumbs": [
      "Bases de dades de referència",
      "Control de canvis",
      "Localitats"
    ]
  },
  {
    "objectID": "data-raw/README.html",
    "href": "data-raw/README.html",
    "title": "Bases de dades de referència",
    "section": "",
    "text": "bd\nn_obj\nn_cols\ncolumnes\n\n\n\n\ncomarques\n95\n9\nname:ca , regio , osm_id , osm_type , name , wikipedia , wikidata , admin_level , historic:admin_level\n\n\nmunicipis\n1671\n9\nname:ca , regio , comarca , osm_id , osm_type , name , wikipedia , wikidata , admin_level\n\n\nloc_admin_centre_municipis\n1673\n12\nregio , comarca , municipi , osm_type , osm_id , name:ca , name , wikidata , wikipedia , place , capital , admin_level\n\n\nterritoris\n10\n7\nname:ca , regio , osm_id , osm_type , name , wikipedia, wikidata\n\n\nPPCC\n1\n6\nname:ca , osm_id , osm_type , name , wikipedia, wikidata\n\n\n\nEn total es monitoritzen 3450 objectes d’OpenStreetMap.\nAbans de revertir canvis a OSM o comentar conjunts de canvis, comproveu les dades i, si cal, corregiu les bases de dades de referència.\n\n\nSi voleu afegir objectes amb les seves etiquetes a les bases de dades, podeu obrir un tiquet o un PR que inclogui la base de dades i el codi per generar els informes.\n\n\nCreeu una taula amb els estats de referència. Cal que cada fila contingui les etiquetes que vulgueu monitorar i els identificadors únics d’OpenStreetMap (osm_type i osm_id). Podeu generar les taules amb el paquet d’R osmdata.\nExemple per generar una taula amb les etiquetes name:ca, name, wikipedia i wikidata de tots els cims dels Països Catalans (relation(id:11747082)):\nlibrary(osmdata)\n#&gt; Data (c) OpenStreetMap contributors, ODbL 1.0. https://www.openstreetmap.org/copyright\n\ncims &lt;- opq(bbox = \"relation(id:11747082)\", out = \"tags\", timeout = \"100\") |&gt;\n  add_osm_feature(key = \"natural\", value = \"peak\") |&gt;\n  opq_csv(fields = c(\"name:ca\", \"::id\", \"::type\", \"name\", \"wikipedia\", \"wikidata\")) |&gt;\n  osmdata_data_frame()\n\nnames(cims) &lt;- gsub(\"^@\", \"osm_\", names(cims))\nhead(cims)\n#&gt;                    name:ca   osm_id osm_type                     name\n#&gt; 1           Puig de l'Ofre 26783257     node           Puig de l'Ofre\n#&gt; 2        Puig de Bassegoda 26862531     node        Puig de Bassegoda\n#&gt; 3           Cap de Boumort 26862611     node           Cap de Boumort\n#&gt; 4             Cap del Verd 26862659     node             Cap del Verd\n#&gt; 5       Pic de Comaloforno 26862732     node       Pic de Comaloforno\n#&gt; 6 Cap de la Gallina Pelada 26862904     node Cap de la Gallina Pelada\n#&gt;                     wikipedia  wikidata\n#&gt; 1           ca:Puig de l'Ofre  Q1652824\n#&gt; 2        ca:Puig de Bassegoda  Q4894784\n#&gt; 3           ca:Cap de Boumort  Q5034453\n#&gt; 4             ca:Cap del Verd  Q5034455\n#&gt; 5       ca:Pic de Comaloforno  Q2984642\n#&gt; 6 ca:Cap de la Gallina Pelada Q17482071\nÉs pràctic afegir la comarca i territori de cada objecte per poder fer les reversions amb conjunts de canvis més petits:\nlibrary(osmdata)\nlibrary(monitorOSM) # comarques\n#&gt; Dades sota llicència ODbL 1.0. (c) Col·laboradors d'OpenStreetMap https://www.openstreetmap.org/copyright\n\ncims_comarca &lt;- mapply(function(id, nom, territori) {\n  out &lt;- opq(bbox = paste0(\"relation(id:\", id, \")\"), out = \"tags\", timeout = \"100\") |&gt;\n    add_osm_feature(key = \"natural\", value = \"peak\") |&gt;\n    opq_csv(fields = c(\"name:ca\", \"::id\", \"::type\", \"name\", \"wikipedia\", \"wikidata\")) |&gt;\n    osmdata_data_frame()\n\n  if (nrow(out) &gt; 0) {\n    out$regio &lt;- territori\n    out$comarca &lt;- nom\n  }\n\n  return(out)\n}, id = comarques$osm_id, nom = comarques$`name:ca`, territori = comarques$regio, SIMPLIFY = FALSE)\n\ncims_comarques &lt;- do.call(rbind, cims_comarca)\nnames(cims_comarques) &lt;- gsub(\"^@\", \"osm_\", names(cims_comarques))\n\ncims_comarques &lt;- cims_comarques[!duplicated(cims_comarques[, c(\"osm_type\", \"osm_id\")]), ] # elimina objectes duplicats\nordre &lt;- order(cims_comarques$regio, cims_comarques$comarca, cims_comarques$`name:ca`)\nordre_columnes &lt;- c(\"name:ca\", \"regio\", \"comarca\", \"osm_id\", \"osm_type\", \"name\", \"wikipedia\", \"wikidata\")\ncims_comarques &lt;- unique(cims_comarques[ordre, ordre_columnes])\nrownames(cims_comarques) &lt;- NULL\n\nhead(cims_comarques)\n#&gt;   name:ca   regio          comarca     osm_id osm_type              name\n#&gt; 1    &lt;NA&gt; Andorra Andorra la Vella 1473165520     node        Pic Carroi\n#&gt; 2    &lt;NA&gt; Andorra Andorra la Vella 2188366026     node    Pic de Coll Pa\n#&gt; 3    &lt;NA&gt; Andorra Andorra la Vella 3956298776     node              &lt;NA&gt;\n#&gt; 4    &lt;NA&gt; Andorra Andorra la Vella 9127648546     node Pic de la Peguera\n#&gt; 5    &lt;NA&gt; Andorra Andorra la Vella 9706258659     node    Roc dels Corbs\n#&gt; 6    &lt;NA&gt; Andorra Andorra la Vella 9706258725     node    Roc de Patapou\n#&gt;   wikipedia  wikidata\n#&gt; 1      &lt;NA&gt; Q21329274\n#&gt; 2      &lt;NA&gt; Q21329357\n#&gt; 3      &lt;NA&gt;      &lt;NA&gt;\n#&gt; 4      &lt;NA&gt;      &lt;NA&gt;\n#&gt; 5      &lt;NA&gt; Q21329430\n#&gt; 6      &lt;NA&gt;      &lt;NA&gt;\nUn cop tingueu la base de dades a punt, es pot afegir al paquet de manera que estigui disponible quan el carreguem:\nusethis::use_data(cims_comarques, overwrite = TRUE, compress = \"xz\")\nÉs recomanable preparar un fitxer per gestionar la nova base de dades i desar-la com a taula (exemple). També cal documentar la nova taula (exemple).\nPer començar a monitorar la nova base de dades cal crear o afegir-la a un fitxer com limits.qmd."
  },
  {
    "objectID": "data-raw/README.html#com-afegir-noves-bases-de-dades",
    "href": "data-raw/README.html#com-afegir-noves-bases-de-dades",
    "title": "Bases de dades de referència",
    "section": "",
    "text": "Si voleu afegir objectes amb les seves etiquetes a les bases de dades, podeu obrir un tiquet o un PR que inclogui la base de dades i el codi per generar els informes.\n\n\nCreeu una taula amb els estats de referència. Cal que cada fila contingui les etiquetes que vulgueu monitorar i els identificadors únics d’OpenStreetMap (osm_type i osm_id). Podeu generar les taules amb el paquet d’R osmdata.\nExemple per generar una taula amb les etiquetes name:ca, name, wikipedia i wikidata de tots els cims dels Països Catalans (relation(id:11747082)):\nlibrary(osmdata)\n#&gt; Data (c) OpenStreetMap contributors, ODbL 1.0. https://www.openstreetmap.org/copyright\n\ncims &lt;- opq(bbox = \"relation(id:11747082)\", out = \"tags\", timeout = \"100\") |&gt;\n  add_osm_feature(key = \"natural\", value = \"peak\") |&gt;\n  opq_csv(fields = c(\"name:ca\", \"::id\", \"::type\", \"name\", \"wikipedia\", \"wikidata\")) |&gt;\n  osmdata_data_frame()\n\nnames(cims) &lt;- gsub(\"^@\", \"osm_\", names(cims))\nhead(cims)\n#&gt;                    name:ca   osm_id osm_type                     name\n#&gt; 1           Puig de l'Ofre 26783257     node           Puig de l'Ofre\n#&gt; 2        Puig de Bassegoda 26862531     node        Puig de Bassegoda\n#&gt; 3           Cap de Boumort 26862611     node           Cap de Boumort\n#&gt; 4             Cap del Verd 26862659     node             Cap del Verd\n#&gt; 5       Pic de Comaloforno 26862732     node       Pic de Comaloforno\n#&gt; 6 Cap de la Gallina Pelada 26862904     node Cap de la Gallina Pelada\n#&gt;                     wikipedia  wikidata\n#&gt; 1           ca:Puig de l'Ofre  Q1652824\n#&gt; 2        ca:Puig de Bassegoda  Q4894784\n#&gt; 3           ca:Cap de Boumort  Q5034453\n#&gt; 4             ca:Cap del Verd  Q5034455\n#&gt; 5       ca:Pic de Comaloforno  Q2984642\n#&gt; 6 ca:Cap de la Gallina Pelada Q17482071\nÉs pràctic afegir la comarca i territori de cada objecte per poder fer les reversions amb conjunts de canvis més petits:\nlibrary(osmdata)\nlibrary(monitorOSM) # comarques\n#&gt; Dades sota llicència ODbL 1.0. (c) Col·laboradors d'OpenStreetMap https://www.openstreetmap.org/copyright\n\ncims_comarca &lt;- mapply(function(id, nom, territori) {\n  out &lt;- opq(bbox = paste0(\"relation(id:\", id, \")\"), out = \"tags\", timeout = \"100\") |&gt;\n    add_osm_feature(key = \"natural\", value = \"peak\") |&gt;\n    opq_csv(fields = c(\"name:ca\", \"::id\", \"::type\", \"name\", \"wikipedia\", \"wikidata\")) |&gt;\n    osmdata_data_frame()\n\n  if (nrow(out) &gt; 0) {\n    out$regio &lt;- territori\n    out$comarca &lt;- nom\n  }\n\n  return(out)\n}, id = comarques$osm_id, nom = comarques$`name:ca`, territori = comarques$regio, SIMPLIFY = FALSE)\n\ncims_comarques &lt;- do.call(rbind, cims_comarca)\nnames(cims_comarques) &lt;- gsub(\"^@\", \"osm_\", names(cims_comarques))\n\ncims_comarques &lt;- cims_comarques[!duplicated(cims_comarques[, c(\"osm_type\", \"osm_id\")]), ] # elimina objectes duplicats\nordre &lt;- order(cims_comarques$regio, cims_comarques$comarca, cims_comarques$`name:ca`)\nordre_columnes &lt;- c(\"name:ca\", \"regio\", \"comarca\", \"osm_id\", \"osm_type\", \"name\", \"wikipedia\", \"wikidata\")\ncims_comarques &lt;- unique(cims_comarques[ordre, ordre_columnes])\nrownames(cims_comarques) &lt;- NULL\n\nhead(cims_comarques)\n#&gt;   name:ca   regio          comarca     osm_id osm_type              name\n#&gt; 1    &lt;NA&gt; Andorra Andorra la Vella 1473165520     node        Pic Carroi\n#&gt; 2    &lt;NA&gt; Andorra Andorra la Vella 2188366026     node    Pic de Coll Pa\n#&gt; 3    &lt;NA&gt; Andorra Andorra la Vella 3956298776     node              &lt;NA&gt;\n#&gt; 4    &lt;NA&gt; Andorra Andorra la Vella 9127648546     node Pic de la Peguera\n#&gt; 5    &lt;NA&gt; Andorra Andorra la Vella 9706258659     node    Roc dels Corbs\n#&gt; 6    &lt;NA&gt; Andorra Andorra la Vella 9706258725     node    Roc de Patapou\n#&gt;   wikipedia  wikidata\n#&gt; 1      &lt;NA&gt; Q21329274\n#&gt; 2      &lt;NA&gt; Q21329357\n#&gt; 3      &lt;NA&gt;      &lt;NA&gt;\n#&gt; 4      &lt;NA&gt;      &lt;NA&gt;\n#&gt; 5      &lt;NA&gt; Q21329430\n#&gt; 6      &lt;NA&gt;      &lt;NA&gt;\nUn cop tingueu la base de dades a punt, es pot afegir al paquet de manera que estigui disponible quan el carreguem:\nusethis::use_data(cims_comarques, overwrite = TRUE, compress = \"xz\")\nÉs recomanable preparar un fitxer per gestionar la nova base de dades i desar-la com a taula (exemple). També cal documentar la nova taula (exemple).\nPer començar a monitorar la nova base de dades cal crear o afegir-la a un fitxer com limits.qmd."
  },
  {
    "objectID": "README.html",
    "href": "README.html",
    "title": "monitorOSM ",
    "section": "",
    "text": "monitorOSM és un repositori que serveix per monitoritzar canvis a OpenStreetMap comparant els objectes amb bases de dades de referència.\nPodeu veure els informes que s’actualitzen diàriament a https://osm-catalan.github.io/monitorOSM. Els informes de canvis mostren taules amb l’estat de les etiquetes a OSM i a les bases de dades de referència:\n\n\n\n\n\n\nosm_url\ncanvi\nname:ca\nname\nwikipedia\n\n\n\n\nhttp://osm.org/node/XXXX\n+\nnom a OSM\nSense canvis\n\n\n\nhttp://osm.org/node/XXXX\n-\nnom de referència\nSense canvis\nca:Eliminat\n\n\n\n\n\n\nTambé es mostra quins conjunts de canvis han trencat les etiquetes amb enllaços per si es vol deixar comentaris.\n\n\nSi voleu afegir objectes amb les seves etiquetes a les bases de dades, podeu obrir un tiquet o podeu provar de fer un PR amb les instruccions que trobareu a aquí. Fora bo que els estats de referència dels objectes siguin consensuats amb la Comunitat d’OpenStreetmap en català.\n\n\n\nLa consulta, comparació amb bases de dades de referència i renderització de la web es fan amb un paquet d’R i accions de github. El paquet també inclou funcions per restaurar els objectes de manera ràpida, però com a projecte comunitari, és important intentar parlar amb els usuaris que discrepen de les bases de dades de referència. Vegeu la documentació del paquet d’R per més detalls.\n\n\nInstal·leu el paquet d’R:\n# install.packages(\"remotes\")\nremotes::install_github(\"OSM-Catalan/monitorOSM\")\nRestauració de les etiquetes name i wikipedia de les comarques del País Valencià:\nlibrary(monitorOSM)\n\nid &lt;- modifica_etiquetes_osm(\n  comarques[comarques$regio == \"PV\", ],\n  claus = c(\"name\", \"wikipedia\"),\n  comentari = \"Restaura els noms de les comarques dels País Valencià\", hashtags = \"monitorOSM\"\n)\nRetorna l’identificador del conjunt de canvis."
  },
  {
    "objectID": "README.html#afegir-nous-objectes-a-les-bases-de-dades",
    "href": "README.html#afegir-nous-objectes-a-les-bases-de-dades",
    "title": "monitorOSM ",
    "section": "",
    "text": "Si voleu afegir objectes amb les seves etiquetes a les bases de dades, podeu obrir un tiquet o podeu provar de fer un PR amb les instruccions que trobareu a aquí. Fora bo que els estats de referència dels objectes siguin consensuats amb la Comunitat d’OpenStreetmap en català."
  },
  {
    "objectID": "README.html#paquet-dr",
    "href": "README.html#paquet-dr",
    "title": "monitorOSM ",
    "section": "",
    "text": "La consulta, comparació amb bases de dades de referència i renderització de la web es fan amb un paquet d’R i accions de github. El paquet també inclou funcions per restaurar els objectes de manera ràpida, però com a projecte comunitari, és important intentar parlar amb els usuaris que discrepen de les bases de dades de referència. Vegeu la documentació del paquet d’R per més detalls.\n\n\nInstal·leu el paquet d’R:\n# install.packages(\"remotes\")\nremotes::install_github(\"OSM-Catalan/monitorOSM\")\nRestauració de les etiquetes name i wikipedia de les comarques del País Valencià:\nlibrary(monitorOSM)\n\nid &lt;- modifica_etiquetes_osm(\n  comarques[comarques$regio == \"PV\", ],\n  claus = c(\"name\", \"wikipedia\"),\n  comentari = \"Restaura els noms de les comarques dels País Valencià\", hashtags = \"monitorOSM\"\n)\nRetorna l’identificador del conjunt de canvis."
  },
  {
    "objectID": "web/limits.html",
    "href": "web/limits.html",
    "title": "Municipis, comarques i territoris",
    "section": "",
    "text": "Última actualització: Thu 18 Apr 2024 - 01:59:55",
    "crumbs": [
      "Bases de dades de referència",
      "Control de canvis",
      "Municipis, comarques i territoris"
    ]
  },
  {
    "objectID": "web/limits.html#països-catalans",
    "href": "web/limits.html#països-catalans",
    "title": "Municipis, comarques i territoris",
    "section": "Països Catalans",
    "text": "Països Catalans\nBD de referència\n\n\n🎉 Tot en ordre 🎉",
    "crumbs": [
      "Bases de dades de referència",
      "Control de canvis",
      "Municipis, comarques i territoris"
    ]
  },
  {
    "objectID": "web/limits.html#territoris",
    "href": "web/limits.html#territoris",
    "title": "Municipis, comarques i territoris",
    "section": "Territoris",
    "text": "Territoris\nBD de referència\n\n\n🎉 Tot en ordre 🎉",
    "crumbs": [
      "Bases de dades de referència",
      "Control de canvis",
      "Municipis, comarques i territoris"
    ]
  },
  {
    "objectID": "web/limits.html#comarques",
    "href": "web/limits.html#comarques",
    "title": "Municipis, comarques i territoris",
    "section": "Comarques",
    "text": "Comarques\nBD de referència\n\n\n\n\n\n\nosm_url\ncanvi\nname:ca\nname\nwikipedia\nwikidata\nadmin_level\nhistoric:admin_level\n\n\n\n\nhttps://osm.org/relation/6488309\n+\nRibagorça\nRibagorza\nes:Ribagorza\nQ1425491\n7\n\n\n\nhttps://osm.org/relation/6488309\n-\nRibagorça\nLa Ribagorza\nes:Ribagorza\nQ1425491\n7\n\n\n\n\n\n\n\n\nConjunts de canvis\n\n\nhttps://osm.org/relation/6488309\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n27\n149704833\n2024-04-07 18:14:24\nDavileci\n8123953\nname\nRibagorza\nLa Ribagorza",
    "crumbs": [
      "Bases de dades de referència",
      "Control de canvis",
      "Municipis, comarques i territoris"
    ]
  },
  {
    "objectID": "web/limits.html#municipis",
    "href": "web/limits.html#municipis",
    "title": "Municipis, comarques i territoris",
    "section": "Municipis",
    "text": "Municipis\nBD de referència\n\n\n\n\n\n\nosm_url\ncanvi\nname:ca\nname\nwikipedia\nwikidata\nadmin_level\n\n\n\n\nhttps://osm.org/relation/341056\n+\nBellmunt de Mesquí\nBelmonte de San José\nes:Belmonte de San José\nQ1652468\n8\n\n\nhttps://osm.org/relation/341056\n-\nBellmunt de Mesquí\nBelmonte de San José / Bellmunt de Mesquí\nes:Belmonte de San José\nQ1652468\n8\n\n\nhttps://osm.org/relation/342891\n+\nRàfels\nRáfales\nes:Ráfales\nQ1651261\n8\n\n\nhttps://osm.org/relation/342891\n-\nRàfels\nRáfales / Ràfels\nes:Ráfales\nQ1651261\n8\n\n\nhttps://osm.org/relation/345064\n+\nAiguaviva de Bergantes\nAguaviva\nes:Aguaviva (Teruel)\nQ1770476\n8\n\n\nhttps://osm.org/relation/345064\n-\nAiguaviva de Bergantes\nAguaviva / Aiguaviva de Bergantes\nes:Aguaviva (Teruel)\nQ1770476\n8\n\n\nhttps://osm.org/relation/345972\n+\nla Canyada de Beric\nLa Cañada de Verich\nes:La Cañada de Verich\nQ1553963\n8\n\n\nhttps://osm.org/relation/345972\n-\nla Canyada de Beric\nLa Cañada de Verich / la Canyada de Beric\nes:La Cañada de Verich\nQ1553963\n8\n\n\n\n\n\n\n\nConjunts de canvis\n\n\nhttps://osm.org/relation/341056\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n34\n149992740\n2024-04-14 13:20:57\nAquaevitae\n21300969\nname\nBelmonte de San José\nBelmonte de San José / Bellmunt de Mesquí\n\n\n\n\nhttps://osm.org/relation/342891\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n38\n150059770\n2024-04-15 22:05:49\nAquaevitae\n21300969\nname\nRáfales\nRáfales / Ràfels\n\n\n\n\nhttps://osm.org/relation/345064\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n42\n150059732\n2024-04-15 22:03:37\nAquaevitae\n21300969\nname\nAguaviva\nAguaviva / Aiguaviva de Bergantes\n\n\n\n\nhttps://osm.org/relation/345972\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n35\n150060220\n2024-04-15 22:28:56\nAquaevitae\n21300969\nname\nLa Cañada de Verich\nLa Cañada de Verich / la Canyada de Beric",
    "crumbs": [
      "Bases de dades de referència",
      "Control de canvis",
      "Municipis, comarques i territoris"
    ]
  }
]