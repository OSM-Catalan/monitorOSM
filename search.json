[
  {
    "objectID": "web/localitats.html",
    "href": "web/localitats.html",
    "title": "Localitats",
    "section": "",
    "text": "Última actualització: Wed 17 Jan 2024 - 02:06:27"
  },
  {
    "objectID": "web/localitats.html#localitats-que-fan-dadmin_centre-de-relacions-de-municipis",
    "href": "web/localitats.html#localitats-que-fan-dadmin_centre-de-relacions-de-municipis",
    "title": "Localitats",
    "section": "Localitats que fan d’admin_centre de relacions de municipis",
    "text": "Localitats que fan d’admin_centre de relacions de municipis\nBD de referència\n\n\n\n\n\nosm_url\ncanvi\nname:ca\nname\nwikidata\nwikipedia\nplace\ncapital\nadmin_level\n\n\n\n\nhttps://osm.org/node/1470838605\n+\nNavars\nNavàs\nQ23994001\nca:Navars\nvillage\n8\n\n\n\nhttps://osm.org/node/1470838605\n-\nNavars\nNavàs\nQ16724\nca:Navars\nvillage\n8\n\n\n\nhttps://osm.org/node/1731104444\n+\nCampmany\nCapmany\nQ24019213\nca:Campmany\nvillage\n8\n\n\n\nhttps://osm.org/node/1731104444\n-\nCampmany\nCapmany\nQ7106\nca:Campmany\nvillage\n8\n\n\n\nhttps://osm.org/node/410459744\n+\nel Figueró\nel Figaró\nQ24001636\nca:El Figueró i Montmany\nvillage\n8\n\n\n\nhttps://osm.org/node/410459744\n-\nel Figueró\nel Figaró\n\nca:El Figueró i Montmany\nvillage\n8\n\n\n\nhttps://osm.org/node/649883120\n+\nCabassers\nCabacés\nQ24015227\nca:Cabassers\nvillage\n8\n\n\n\nhttps://osm.org/node/649883120\n-\nCabassers\nCabacés\nQ1248525\nca:Cabassers\nvillage\n8\n\n\n\n\n\n\n\nConjunts de canvis\n\nhttps://osm.org/node/1470838605\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n18\n145861145\n2024-01-04 02:04:52\nDavileci\n8123953\nwikidata\nQ23994001\nQ16724\n\n\n\n\nhttps://osm.org/node/1731104444\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n16\n145756188\n2024-01-01 10:02:10\nDavileci\n8123953\nwikidata\nQ24019213\nQ7106\n\n\n\nNo s’ha trobat cap versió en l’estat de referència per https://osm.org/node/410459744.\n\n\nhttps://osm.org/node/649883120\n\n\nversion\nchangeset\ntimestamp\nuser\nuid\nkey\nvalue\nref_value\n\n\n\n\n20\n145859377\n2024-01-04 00:12:23\nDavileci\n8123953\nwikidata\nQ24015227\nQ1248525"
  },
  {
    "objectID": "data-raw/README.html",
    "href": "data-raw/README.html",
    "title": "Bases de dades de referència",
    "section": "",
    "text": "bd\nn_obj\nn_cols\ncolumnes\n\n\n\n\ncomarques\n95\n9\nname:ca , regio , osm_id , osm_type , name , wikipedia , wikidata , admin_level , historic:admin_level\n\n\nmunicipis\n1671\n9\nname:ca , regio , comarca , osm_id , osm_type , name , wikipedia , wikidata , admin_level\n\n\nloc_admin_centre_municipis\n1673\n12\nregio , comarca , municipi , osm_type , osm_id , name:ca , name , wikidata , wikipedia , place , capital , admin_level\n\n\nterritoris\n10\n7\nname:ca , regio , osm_id , osm_type , name , wikipedia, wikidata\n\n\nPPCC\n1\n6\nname:ca , osm_id , osm_type , name , wikipedia, wikidata\n\n\n\nEn total es monitoritzen 3450 objectes d’OpenStreetMap.\nAbans de revertir canvis a OSM o comentar conjunts de canvis, comproveu les dades i, si cal, corregiu les bases de dades de referència.\n\n\nSi voleu afegir objectes amb les seves etiquetes a les bases de dades, podeu obrir un tiquet o un PR que inclogui la base de dades i el codi per generar els informes.\n\n\nCreeu una taula amb els estats de referència. Cal que cada fila contingui les etiquetes que vulgueu monitorar i els identificadors únics d’OpenStreetMap (osm_type i osm_id). Podeu generar les taules amb el paquet d’R osmdata.\nExemple per generar una taula amb les etiquetes name:ca, name, wikipedia i wikidata de tots els cims dels Països Catalans (relation(id:11747082)):\nlibrary(osmdata)\n#&gt; Data (c) OpenStreetMap contributors, ODbL 1.0. https://www.openstreetmap.org/copyright\n\ncims &lt;- opq(bbox = \"relation(id:11747082)\", out = \"tags\", timeout = \"100\") |&gt;\n  add_osm_feature(key = \"natural\", value = \"peak\") |&gt;\n  opq_csv(fields = c(\"name:ca\", \"::id\", \"::type\", \"name\", \"wikipedia\", \"wikidata\")) |&gt;\n  osmdata_data_frame()\n\nnames(cims) &lt;- gsub(\"^@\", \"osm_\", names(cims))\nhead(cims)\n#&gt;                    name:ca   osm_id osm_type                     name\n#&gt; 1           Puig de l'Ofre 26783257     node           Puig de l'Ofre\n#&gt; 2        Puig de Bassegoda 26862531     node        Puig de Bassegoda\n#&gt; 3           Cap de Boumort 26862611     node           Cap de Boumort\n#&gt; 4             Cap del Verd 26862659     node             Cap del Verd\n#&gt; 5       Pic de Comaloforno 26862732     node       Pic de Comaloforno\n#&gt; 6 Cap de la Gallina Pelada 26862904     node Cap de la Gallina Pelada\n#&gt;                     wikipedia  wikidata\n#&gt; 1           ca:Puig de l'Ofre  Q1652824\n#&gt; 2        ca:Puig de Bassegoda  Q4894784\n#&gt; 3           ca:Cap de Boumort  Q5034453\n#&gt; 4             ca:Cap del Verd  Q5034455\n#&gt; 5       ca:Pic de Comaloforno  Q2984642\n#&gt; 6 ca:Cap de la Gallina Pelada Q17482071\nÉs pràctic afegir la comarca i territori de cada objecte per poder fer les reversions amb conjunts de canvis més petits:\nlibrary(osmdata)\nlibrary(monitorOSM) # comarques\n#&gt; Dades sota llicència ODbL 1.0. (c) Col·laboradors d'OpenStreetMap https://www.openstreetmap.org/copyright\n\ncims_comarca &lt;- mapply(function(id, nom, territori) {\n  out &lt;- opq(bbox = paste0(\"relation(id:\", id, \")\"), out = \"tags\", timeout = \"100\") |&gt;\n    add_osm_feature(key = \"natural\", value = \"peak\") |&gt;\n    opq_csv(fields = c(\"name:ca\", \"::id\", \"::type\", \"name\", \"wikipedia\", \"wikidata\")) |&gt;\n    osmdata_data_frame()\n\n  if (nrow(out) &gt; 0) {\n    out$regio &lt;- territori\n    out$comarca &lt;- nom\n  }\n\n  return(out)\n}, id = comarques$osm_id, nom = comarques$`name:ca`, territori = comarques$regio, SIMPLIFY = FALSE)\n\ncims_comarques &lt;- do.call(rbind, cims_comarca)\nnames(cims_comarques) &lt;- gsub(\"^@\", \"osm_\", names(cims_comarques))\n\ncims_comarques &lt;- cims_comarques[!duplicated(cims_comarques[, c(\"osm_type\", \"osm_id\")]), ] # elimina objectes duplicats\nordre &lt;- order(cims_comarques$regio, cims_comarques$comarca, cims_comarques$`name:ca`)\nordre_columnes &lt;- c(\"name:ca\", \"regio\", \"comarca\", \"osm_id\", \"osm_type\", \"name\", \"wikipedia\", \"wikidata\")\ncims_comarques &lt;- unique(cims_comarques[ordre, ordre_columnes])\nrownames(cims_comarques) &lt;- NULL\n\nhead(cims_comarques)\n#&gt;   name:ca   regio          comarca     osm_id osm_type              name\n#&gt; 1    &lt;NA&gt; Andorra Andorra la Vella 1473165520     node        Pic Carroi\n#&gt; 2    &lt;NA&gt; Andorra Andorra la Vella 2188366026     node    Pic de Coll Pa\n#&gt; 3    &lt;NA&gt; Andorra Andorra la Vella 3956298776     node              &lt;NA&gt;\n#&gt; 4    &lt;NA&gt; Andorra Andorra la Vella 9127648546     node Pic de la Peguera\n#&gt; 5    &lt;NA&gt; Andorra Andorra la Vella 9706258659     node    Roc dels Corbs\n#&gt; 6    &lt;NA&gt; Andorra Andorra la Vella 9706258725     node    Roc de Patapou\n#&gt;   wikipedia  wikidata\n#&gt; 1      &lt;NA&gt; Q21329274\n#&gt; 2      &lt;NA&gt; Q21329357\n#&gt; 3      &lt;NA&gt;      &lt;NA&gt;\n#&gt; 4      &lt;NA&gt;      &lt;NA&gt;\n#&gt; 5      &lt;NA&gt; Q21329430\n#&gt; 6      &lt;NA&gt;      &lt;NA&gt;\nUn cop tingueu la base de dades a punt, es pot afegir al paquet de manera que estigui disponible quan el carreguem:\nusethis::use_data(cims_comarques, overwrite = TRUE, compress = \"xz\")\nÉs recomanable preparar un fitxer per gestionar la nova base de dades i desar-la com a taula (exemple). També cal documentar la nova taula (exemple).\nPer començar a monitorar la nova base de dades cal crear o afegir-la a un fitxer com limits.qmd."
  },
  {
    "objectID": "data-raw/README.html#com-afegir-noves-bases-de-dades",
    "href": "data-raw/README.html#com-afegir-noves-bases-de-dades",
    "title": "Bases de dades de referència",
    "section": "",
    "text": "Si voleu afegir objectes amb les seves etiquetes a les bases de dades, podeu obrir un tiquet o un PR que inclogui la base de dades i el codi per generar els informes.\n\n\nCreeu una taula amb els estats de referència. Cal que cada fila contingui les etiquetes que vulgueu monitorar i els identificadors únics d’OpenStreetMap (osm_type i osm_id). Podeu generar les taules amb el paquet d’R osmdata.\nExemple per generar una taula amb les etiquetes name:ca, name, wikipedia i wikidata de tots els cims dels Països Catalans (relation(id:11747082)):\nlibrary(osmdata)\n#&gt; Data (c) OpenStreetMap contributors, ODbL 1.0. https://www.openstreetmap.org/copyright\n\ncims &lt;- opq(bbox = \"relation(id:11747082)\", out = \"tags\", timeout = \"100\") |&gt;\n  add_osm_feature(key = \"natural\", value = \"peak\") |&gt;\n  opq_csv(fields = c(\"name:ca\", \"::id\", \"::type\", \"name\", \"wikipedia\", \"wikidata\")) |&gt;\n  osmdata_data_frame()\n\nnames(cims) &lt;- gsub(\"^@\", \"osm_\", names(cims))\nhead(cims)\n#&gt;                    name:ca   osm_id osm_type                     name\n#&gt; 1           Puig de l'Ofre 26783257     node           Puig de l'Ofre\n#&gt; 2        Puig de Bassegoda 26862531     node        Puig de Bassegoda\n#&gt; 3           Cap de Boumort 26862611     node           Cap de Boumort\n#&gt; 4             Cap del Verd 26862659     node             Cap del Verd\n#&gt; 5       Pic de Comaloforno 26862732     node       Pic de Comaloforno\n#&gt; 6 Cap de la Gallina Pelada 26862904     node Cap de la Gallina Pelada\n#&gt;                     wikipedia  wikidata\n#&gt; 1           ca:Puig de l'Ofre  Q1652824\n#&gt; 2        ca:Puig de Bassegoda  Q4894784\n#&gt; 3           ca:Cap de Boumort  Q5034453\n#&gt; 4             ca:Cap del Verd  Q5034455\n#&gt; 5       ca:Pic de Comaloforno  Q2984642\n#&gt; 6 ca:Cap de la Gallina Pelada Q17482071\nÉs pràctic afegir la comarca i territori de cada objecte per poder fer les reversions amb conjunts de canvis més petits:\nlibrary(osmdata)\nlibrary(monitorOSM) # comarques\n#&gt; Dades sota llicència ODbL 1.0. (c) Col·laboradors d'OpenStreetMap https://www.openstreetmap.org/copyright\n\ncims_comarca &lt;- mapply(function(id, nom, territori) {\n  out &lt;- opq(bbox = paste0(\"relation(id:\", id, \")\"), out = \"tags\", timeout = \"100\") |&gt;\n    add_osm_feature(key = \"natural\", value = \"peak\") |&gt;\n    opq_csv(fields = c(\"name:ca\", \"::id\", \"::type\", \"name\", \"wikipedia\", \"wikidata\")) |&gt;\n    osmdata_data_frame()\n\n  if (nrow(out) &gt; 0) {\n    out$regio &lt;- territori\n    out$comarca &lt;- nom\n  }\n\n  return(out)\n}, id = comarques$osm_id, nom = comarques$`name:ca`, territori = comarques$regio, SIMPLIFY = FALSE)\n\ncims_comarques &lt;- do.call(rbind, cims_comarca)\nnames(cims_comarques) &lt;- gsub(\"^@\", \"osm_\", names(cims_comarques))\n\ncims_comarques &lt;- cims_comarques[!duplicated(cims_comarques[, c(\"osm_type\", \"osm_id\")]), ] # elimina objectes duplicats\nordre &lt;- order(cims_comarques$regio, cims_comarques$comarca, cims_comarques$`name:ca`)\nordre_columnes &lt;- c(\"name:ca\", \"regio\", \"comarca\", \"osm_id\", \"osm_type\", \"name\", \"wikipedia\", \"wikidata\")\ncims_comarques &lt;- unique(cims_comarques[ordre, ordre_columnes])\nrownames(cims_comarques) &lt;- NULL\n\nhead(cims_comarques)\n#&gt;   name:ca   regio          comarca     osm_id osm_type              name\n#&gt; 1    &lt;NA&gt; Andorra Andorra la Vella 1473165520     node        Pic Carroi\n#&gt; 2    &lt;NA&gt; Andorra Andorra la Vella 2188366026     node    Pic de Coll Pa\n#&gt; 3    &lt;NA&gt; Andorra Andorra la Vella 3956298776     node              &lt;NA&gt;\n#&gt; 4    &lt;NA&gt; Andorra Andorra la Vella 9127648546     node Pic de la Peguera\n#&gt; 5    &lt;NA&gt; Andorra Andorra la Vella 9706258659     node    Roc dels Corbs\n#&gt; 6    &lt;NA&gt; Andorra Andorra la Vella 9706258725     node    Roc de Patapou\n#&gt;   wikipedia  wikidata\n#&gt; 1      &lt;NA&gt; Q21329274\n#&gt; 2      &lt;NA&gt; Q21329357\n#&gt; 3      &lt;NA&gt;      &lt;NA&gt;\n#&gt; 4      &lt;NA&gt;      &lt;NA&gt;\n#&gt; 5      &lt;NA&gt; Q21329430\n#&gt; 6      &lt;NA&gt;      &lt;NA&gt;\nUn cop tingueu la base de dades a punt, es pot afegir al paquet de manera que estigui disponible quan el carreguem:\nusethis::use_data(cims_comarques, overwrite = TRUE, compress = \"xz\")\nÉs recomanable preparar un fitxer per gestionar la nova base de dades i desar-la com a taula (exemple). També cal documentar la nova taula (exemple).\nPer començar a monitorar la nova base de dades cal crear o afegir-la a un fitxer com limits.qmd."
  },
  {
    "objectID": "README.html",
    "href": "README.html",
    "title": "monitorOSM ",
    "section": "",
    "text": "monitorOSM és un repositori que serveix per monitoritzar canvis a OpenStreetMap comparant els objectes amb bases de dades de referència.\nPodeu veure els informes que s’actualitzen diàriament a https://osm-catalan.github.io/monitorOSM. Els informes de canvis mostren taules amb l’estat de les etiquetes a OSM i a les bases de dades de referència:\n\n\n\n\n\nosm_url\ncanvi\nname:ca\nname\nwikipedia\n\n\n\n\nhttp://osm.org/node/XXXX\n+\nnom a OSM\nSense canvis\n\n\n\nhttp://osm.org/node/XXXX\n-\nnom de referència\nSense canvis\nca:Eliminat\n\n\n\n\n\nTambé es mostra quins conjunts de canvis han trencat les etiquetes amb enllaços per si es vol deixar comentaris.\n\n\nSi voleu afegir objectes amb les seves etiquetes a les bases de dades, podeu obrir un tiquet o podeu provar de fer un PR amb les instruccions que trobareu a aquí. Fora bo que els estats de referència dels objectes siguin consensuats amb la Comunitat d’OpenStreetmap en català.\n\n\n\nLa consulta, comparació amb bases de dades de referència i renderització de la web es fan amb un paquet d’R i accions de github. El paquet també inclou funcions per restaurar els objectes de manera ràpida, però com a projecte comunitari, és important intentar parlar amb els usuaris que discrepen de les bases de dades de referència. Vegeu la documentació del paquet d’R per més detalls.\n\n\nInstal·leu el paquet d’R:\n# install.packages(\"remotes\")\nremotes::install_github(\"OSM-Catalan/monitorOSM\")\nRestauració de les etiquetes name i wikipedia de les comarques del País Valencià:\nlibrary(monitorOSM)\n\nid &lt;- modifica_etiquetes_osm(\n  comarques[comarques$regio == \"PV\", ],\n  claus = c(\"name\", \"wikipedia\"),\n  comentari = \"Restaura els noms de les comarques dels País Valencià\", hashtags = \"monitorOSM\"\n)\nRetorna l’identificador del conjunt de canvis."
  },
  {
    "objectID": "README.html#afegir-nous-objectes-a-les-bases-de-dades",
    "href": "README.html#afegir-nous-objectes-a-les-bases-de-dades",
    "title": "monitorOSM ",
    "section": "",
    "text": "Si voleu afegir objectes amb les seves etiquetes a les bases de dades, podeu obrir un tiquet o podeu provar de fer un PR amb les instruccions que trobareu a aquí. Fora bo que els estats de referència dels objectes siguin consensuats amb la Comunitat d’OpenStreetmap en català."
  },
  {
    "objectID": "README.html#paquet-dr",
    "href": "README.html#paquet-dr",
    "title": "monitorOSM ",
    "section": "",
    "text": "La consulta, comparació amb bases de dades de referència i renderització de la web es fan amb un paquet d’R i accions de github. El paquet també inclou funcions per restaurar els objectes de manera ràpida, però com a projecte comunitari, és important intentar parlar amb els usuaris que discrepen de les bases de dades de referència. Vegeu la documentació del paquet d’R per més detalls.\n\n\nInstal·leu el paquet d’R:\n# install.packages(\"remotes\")\nremotes::install_github(\"OSM-Catalan/monitorOSM\")\nRestauració de les etiquetes name i wikipedia de les comarques del País Valencià:\nlibrary(monitorOSM)\n\nid &lt;- modifica_etiquetes_osm(\n  comarques[comarques$regio == \"PV\", ],\n  claus = c(\"name\", \"wikipedia\"),\n  comentari = \"Restaura els noms de les comarques dels País Valencià\", hashtags = \"monitorOSM\"\n)\nRetorna l’identificador del conjunt de canvis."
  },
  {
    "objectID": "web/limits.html",
    "href": "web/limits.html",
    "title": "Municipis, comarques i territoris",
    "section": "",
    "text": "Última actualització: Wed 17 Jan 2024 - 02:06:20"
  },
  {
    "objectID": "web/limits.html#països-catalans",
    "href": "web/limits.html#països-catalans",
    "title": "Municipis, comarques i territoris",
    "section": "Països Catalans",
    "text": "Països Catalans\nBD de referència\n\n\n🎉 Tot en ordre 🎉"
  },
  {
    "objectID": "web/limits.html#territoris",
    "href": "web/limits.html#territoris",
    "title": "Municipis, comarques i territoris",
    "section": "Territoris",
    "text": "Territoris\nBD de referència\n\n\n🎉 Tot en ordre 🎉"
  },
  {
    "objectID": "web/limits.html#comarques",
    "href": "web/limits.html#comarques",
    "title": "Municipis, comarques i territoris",
    "section": "Comarques",
    "text": "Comarques\nBD de referència\n\n\n🎉 Tot en ordre 🎉"
  },
  {
    "objectID": "web/limits.html#municipis",
    "href": "web/limits.html#municipis",
    "title": "Municipis, comarques i territoris",
    "section": "Municipis",
    "text": "Municipis\nBD de referència\n\n\n🎉 Tot en ordre 🎉"
  }
]