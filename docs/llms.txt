# monitorOSM

`monitorOSM` és un repositori que serveix per monitoritzar canvis a
[OpenStreetMap](http://www.openstreemap.com) comparant els objectes amb
[bases de dades de
referència](https://github.com/OSM-Catalan/monitorOSM/tree/main/data-raw).

Podeu veure els informes que s’actualitzen diàriament a
<https://osm-catalan.github.io/monitorOSM>. Els informes de canvis
mostren taules amb l’estat de les etiquetes a OSM i a les bases de dades
de referència:

|          osm_url           | canvi |      name:ca      |     name     |  wikipedia  |
|:--------------------------:|:-----:|:-----------------:|:------------:|:-----------:|
| <http://osm.org/node/XXXX> |  \+   |     nom a OSM     | Sense canvis |             |
| <http://osm.org/node/XXXX> |  \-   | nom de referència | Sense canvis | ca:Eliminat |

També es mostra quins conjunts de canvis han trencat les etiquetes amb
enllaços per si es vol deixar comentaris.

## Afegir nous objectes a les bases de dades

Si voleu afegir objectes amb les seves etiquetes a les bases de dades,
podeu obrir un
[tiquet](https://github.com/OSM-Catalan/monitorOSM/issues) o podeu
provar de fer un PR amb les instruccions que trobareu a
[aquí](https://osm-catalan.github.io/monitorOSM/data-raw/README.html).
Fora bo que els estats de referència dels objectes siguin consensuats
amb la [Comunitat d’OpenStreetmap en
català](https://wiki.openstreetmap.org/wiki/WikiProject_Catalan#Canals_de_comunicaci%C3%B3_i_mitjans_de_difusi%C3%B3).

## Paquet d’R

La consulta, comparació amb bases de dades de referència i renderització
de la web es fan amb un paquet d’[R](https://cran.r-project.org/) i
accions de github. El paquet també inclou funcions per restaurar els
objectes de manera ràpida, però com a projecte comunitari, és important
intentar parlar amb els usuaris que discrepen de les bases de dades de
referència. Vegeu la [documentació del paquet
d’R](https://osm-catalan.github.io/monitorOSM/docs/reference/) per més
detalls.

### Exemples d’ús del paquet

Instal·leu el paquet d’R:

``` r
# install.packages("remotes")
remotes::install_github("OSM-Catalan/monitorOSM")
```

### Generació dels informes locals

Per refrescar els informes localment i veure la web, podeu clonar el
repositori i des d’R situat a la carpeta del projecte:

``` r
# install.packages("quarto")
library(quarto)
quarto_render()
```

#### Exemple de restauració

Restauració de les etiquetes `name` i `wikipedia` de les comarques del
País Valencià:

``` r
library(monitorOSM)

id <- modifica_etiquetes_osm(
  comarques[comarques$regio == "PV", ],
  claus = c("name", "wikipedia"),
  comentari = "Restaura els noms de les comarques dels País Valencià", hashtags = "monitorOSM"
)
```

Retorna l’identificador del conjunt de canvis.

# Índex del paquet

## Funcions

- [`canvis_html()`](https://osm-catalan.github.io/monitorOSM/docs/reference/canvis_html.md)
  : Canvis en html
- [`cerca_versio_canvis()`](https://osm-catalan.github.io/monitorOSM/docs/reference/cerca_versio_canvis.md)
  : Cerca les versions que introdueixen canvis
- [`comprova_canvis_osm()`](https://osm-catalan.github.io/monitorOSM/docs/reference/comprova_canvis_osm.md)
  : Comprova canvis a OSM
- [`consulta_etiquetes_osm()`](https://osm-catalan.github.io/monitorOSM/docs/reference/consulta_etiquetes_osm.md)
  : Consulta etiquetes d'OSM
- [`envia_missatge_telegram()`](https://osm-catalan.github.io/monitorOSM/docs/reference/envia_missatge_telegram.md)
  : Envia un missatge a un xat de Telegram
- [`missatge_resum_informes()`](https://osm-catalan.github.io/monitorOSM/docs/reference/missatge_resum_informes.md)
  : Crea missatge de resum d'informes
- [`modifica_etiquetes_osm()`](https://osm-catalan.github.io/monitorOSM/docs/reference/modifica_etiquetes_osm.md)
  : Modifica etiquetes a OSM
- [`versio_canvis_html()`](https://osm-catalan.github.io/monitorOSM/docs/reference/versio_canvis_html.md)
  : Mostra les versions que introdueixen canvis en html

## Bases de dades de referència

- [`PPCC`](https://osm-catalan.github.io/monitorOSM/docs/reference/PPCC.md)
  : Països Catalans
- [`capitals`](https://osm-catalan.github.io/monitorOSM/docs/reference/capitals.md)
  : Capitals d'estats del mon
- [`comarques`](https://osm-catalan.github.io/monitorOSM/docs/reference/comarques.md)
  : Comarques dels Països Catalans
- [`estats`](https://osm-catalan.github.io/monitorOSM/docs/reference/estats.md)
  : Estats del mon
- [`loc_admin_centre_municipis`](https://osm-catalan.github.io/monitorOSM/docs/reference/loc_admin_centre_municipis.md)
  : Centres administratius de les relacions dels municipis dels Països
  Catalans
- [`loc_ref`](https://osm-catalan.github.io/monitorOSM/docs/reference/loc_ref.md)
  : Localitats amb referència de l'administració als Països Catalans
- [`mars`](https://osm-catalan.github.io/monitorOSM/docs/reference/mars.md)
  : Mars i oceans del mon
- [`municipis`](https://osm-catalan.github.io/monitorOSM/docs/reference/municipis.md)
  : Municipis dels Països Catalans
- [`territoris`](https://osm-catalan.github.io/monitorOSM/docs/reference/territoris.md)
  : Territoris dels Països Catalans

